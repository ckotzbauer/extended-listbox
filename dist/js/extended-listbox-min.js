/*!
 * Extended ListBox
 * Maintainer  Christian Kotzbauer <christian.kotzbauer@gmail.com>
 * Website     https://ckotzbauer.github.io/extended-listbox/documentation/latest/
 * Version     5.0.1
 * Released    2018-07-02T16:32:56.765Z
 * License     MIT
 * Copyright   (c) 2018
 */
var extendedlistbox=function(t){var e={};function s(i){if(e[i])return e[i].exports;var l=e[i]={i:i,l:!1,exports:{}};return t[i].call(l.exports,l,l.exports,s),l.l=!0,l.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)s.d(i,l,function(e){return t[e]}.bind(null,l));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=2)}([function(t,e,s){"use strict";s.r(e);class i{constructor(t,e,s){this.dataItems=[],this.selectedDataItems=[],(e=e||{}).searchBar=e.searchBar||!1,e.searchBarWatermark=e.searchBarWatermark||"Search...",e.searchBarButton=e.searchBarButton||{visible:!1},this._target=t,this._settings=e,this.multiple=s}_createListbox(){this._target.classList.add(i.MAIN_CLASS),this._settings.searchBar&&this._createSearchbar(),this._createList()}_createSearchbar(){const t=document.createElement("div");t.classList.add(i.SEARCHBAR_CLASS+"-wrapper"),this._target.appendChild(t);const e=document.createElement("input");if(e.classList.add(i.SEARCHBAR_CLASS),e.setAttribute("placeholder",this._settings.searchBarWatermark),t.appendChild(e),e.onkeyup=(()=>{const t=e.value.toLowerCase();if(""!==t){const e=this._list.querySelectorAll("."+i.LIST_ITEM_CLASS);for(let s=0;s<e.length;s++){const l=e.item(s);l.classList.contains(i.LIST_ITEM_CLASS_GROUP)||(-1!==l.innerText.toLowerCase().indexOf(t)?(l.style.display="block",l.parentElement.style.display="block"):l.style.display="none")}const s=this._list.querySelectorAll("."+i.LIST_ITEM_CLASS_GROUP);for(let t=0;t<s.length;t++){const e=s.item(t),l=e.querySelectorAll("."+i.LIST_ITEM_CLASS);let n=-1;for(let t=0;t<l.length;t++)if("none"!==l.item(t).style.display){n=t;break}e.style.display=-1===n?"none":"block"}}else{const t=this._list.querySelectorAll("."+i.LIST_ITEM_CLASS);for(let e=0;e<t.length;e++){t.item(e).style.display="block"}}this._filterChanged()}),this._settings.searchBarButton.visible){const e=document.createElement("button");if(e.id="searchBarButton",e.setAttribute("tabindex","-1"),e.classList.add(i.SEARCHBAR_BUTTON_CLASS),t.appendChild(e),this._settings.searchBarButton.onClick&&(e.onclick=this._settings.searchBarButton.onClick),this._settings.searchBarButton.icon){const t=document.createElement("i");this._settings.searchBarButton.icon.split(" ").forEach(e=>t.classList.add(e)),e.appendChild(t)}}this._searchbarWrapper=t,this._searchbar=e}_createList(){if(this._list=document.createElement("div"),this._list.classList.add(i.LIST_CLASS),this._target.appendChild(this._list),this._resizeListToListBox(),this._settings.getItems){const t=this._settings.getItems();if(t)for(let e in t)this.addItem(this._prepareDataItem(t[e]),!0)}}_generateItemId(){return"listBoxItem"+parseInt(""+1e7*Math.random(),10)}_prepareDataItem(t){let e={childItems:[],disabled:!1,groupHeader:null,id:this._generateItemId(),parentGroupId:null,selected:!1,text:null,index:null};if("string"==typeof t||"number"==typeof t)return e.text=t,e;{for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);const s=[];for(let t in e.childItems)s.push(this._prepareDataItem(e.childItems[t]));return e.childItems=s,e}}_addItem(t,e,s){this.dataItems.push(t);const l=document.createElement("div");if(l.classList.add(i.LIST_ITEM_CLASS),l.innerText=t.text,l.id=t.id,l.tabIndex=1,l.title=t.text,l.onkeydown=(t=>{t.target.classList.contains(i.LIST_ITEM_CLASS_GROUP)||2!==t.eventPhase||(13===t.which?this._fireEvent(i.EVENT_ITEM_ENTER_PRESSED,this._getDataItem(t.target.id)):38===t.which?(t.preventDefault(),this._itemArrowUp(t.target)):40===t.which&&(t.preventDefault(),this._itemArrowDown(t.target)))}),l.onclick=(t=>{2===t.eventPhase&&this._itemClicked(t.target,t.ctrlKey)}),l.ondblclick=(t=>{t.target.classList.contains(i.LIST_ITEM_CLASS_GROUP)||this._fireEvent(i.EVENT_ITEM_DOUBLE_CLICKED,this._getDataItem(t.target.id))}),t.disabled&&l.classList.add(i.LIST_ITEM_CLASS_DISABLED),t.groupHeader&&l.classList.add(i.LIST_ITEM_CLASS_GROUP),t.selected&&this._itemClicked(l,!0),t.parentGroupId){const e=this._locateItem(t.parentGroupId);e&&(s=e)}s&&l.classList.add(i.LIST_ITEM_CLASS_CHILD);let n=s||this._list;if(void 0===t.index||null===t.index||e?n.appendChild(l):(n=n.children.item(t.index)).parentElement.insertBefore(l,n),t.childItems&&t.childItems.length>0){l.classList.contains(i.LIST_ITEM_CLASS_GROUP)||l.classList.add(i.LIST_ITEM_CLASS_GROUP);for(let s=0;s<t.childItems.length;s++)this._addItem(this._prepareDataItem(t.childItems[s]),e,l)}return t.id}_resizeListToListBox(){const t=window.getComputedStyle(this._target,null),e=parseInt(t.getPropertyValue("padding-top"),10)+parseInt(t.getPropertyValue("padding-bottom"),10);let s=parseInt(t.getPropertyValue("height"),10)-e;this._settings.searchBar&&(s-=this._searchbarWrapper.offsetHeight),this._list.style.height=s+"px"}_clearItemSelection(t){if(t.classList.remove(i.LIST_ITEM_CLASS_SELECTED),this._getDataItem(t.id).selected=!1,this.multiple){const e=this._getDataItem(t.id),s=this.selectedDataItems.indexOf(e);this.selectedDataItems.splice(s,1)}else this.selectedDataItems.splice(0,this.selectedDataItems.length)}_locateItem(t){let e=null;for(let s=0;s<this.dataItems.length;s++)if(this.dataItems[s].id===t||this.dataItems[s].text===t){e=this.dataItems[s].id;break}let s=this._target.querySelector("#"+e);if(!s){const t=this._target.querySelectorAll('div[title="'+e+'"]');if(t.length>0)return t[0]}return s}_findNextItem(t,e){let s=t;for(;;){if(!(s=s[e+"ElementSibling"])){const i=t.parentElement;if(!i)return null;{const t=i[e+"ElementSibling"];if(!t)return null;const l=t.children;s=l.length>0?"next"===e?l[0].firstElementChild:l[0].lastElementChild:i}}if(!s||!s.classList.contains(i.LIST_ITEM_CLASS_DISABLED))return s}}_fireEvent(t,e){let s=this._settings["on"+t[0].toUpperCase()+t.substr(1)];s&&s({eventName:t,target:this._target,args:e})}_elementIndex(t){return Array.prototype.slice.call(t.parentElement.children).indexOf(t)}_getDataItem(t){for(let e=0;e<this.dataItems.length;e++)if(this.dataItems[e].id===t)return this.dataItems[e];return null}_itemArrowUp(t){const e=this._findNextItem(t,"previous");e&&(this._clearItemSelection(t),this._itemClicked(e))}_itemArrowDown(t){const e=this._findNextItem(t,"next");e&&(this._clearItemSelection(t),this._itemClicked(e))}addItem(t,e=!1){e||this.multiple||!t.selected||this.clearSelection();const s=this._addItem(this._prepareDataItem(t),e,null);return e||this._fireEvent(i.EVENT_ITEMS_CHANGED,this.getItems()),s}addItems(t){return t.map(t=>this.addItem(t))}removeItem(t){const e=this._locateItem(t);if(e){this._clearItemSelection(e),e.parentElement.removeChild(e);const t=this._getDataItem(e.id);this.dataItems.splice(this.dataItems.indexOf(t),1);const s=this.selectedDataItems.indexOf(t);-1!==s&&this.selectedDataItems.splice(s,1),this._fireEvent(i.EVENT_ITEMS_CHANGED,this.getItems())}}removeItems(t){t.forEach(t=>this.removeItem(t))}destroy(){for(;this._target.firstChild;)this._target.removeChild(this._target.firstChild);this._target.classList.remove(i.MAIN_CLASS)}clearSelection(){const t=this._list.querySelectorAll("."+i.LIST_ITEM_CLASS);for(let e=0;e<t.length;e++)t[e].classList.remove(i.LIST_ITEM_CLASS_SELECTED),this._getDataItem(t[e].id).selected=!1;this.selectedDataItems=[]}getItem(t){let e=null;const s=this._locateItem(t);return s&&(e=this._getDataItem(s.id)),e}getItems(){const t=[],e=this._list.children;for(let s=0;s<e.length;s++)t.push(this._getDataItem(e[s].id));return t}moveItemUp(t){let e=null;const s=this._locateItem(t);return s&&s.previousElementSibling?(s.parentElement.insertBefore(s,s.previousElementSibling),e=this._elementIndex(s),this._getDataItem(s.id).index=e,this._fireEvent(i.EVENT_ITEMS_CHANGED,this.getItems())):s&&(e=this._elementIndex(s)),e}moveItemDown(t){let e=null;const s=this._locateItem(t);return s&&s.nextElementSibling?(s.parentNode.insertBefore(s.nextElementSibling,s),e=this._elementIndex(s),this._getDataItem(s.id).index=e,this._fireEvent(i.EVENT_ITEMS_CHANGED,this.getItems())):s&&(e=this._elementIndex(s)),e}moveItemToTop(t){let e=null;const s=this._locateItem(t);return s&&(s.parentElement.insertBefore(s,s.parentElement.firstElementChild),e=this._elementIndex(s),this._getDataItem(s.id).index=e,this._fireEvent(i.EVENT_ITEMS_CHANGED,this.getItems())),e}moveItemToBottom(t){let e=null;const s=this._locateItem(t);return s&&(s.parentElement.appendChild(s),e=this._elementIndex(s),this._getDataItem(s.id).index=e),this._fireEvent(i.EVENT_ITEMS_CHANGED,this.getItems()),e}enable(t){t?this._target.classList.remove(i.MAIN_DISABLED_CLASS):this._target.classList.contains(i.MAIN_DISABLED_CLASS)||this._target.classList.add(i.MAIN_DISABLED_CLASS)}getSelection(){return this.selectedDataItems}}i.MAIN_CLASS="listbox-root",i.MAIN_DISABLED_CLASS="listbox-disabled",i.LIST_CLASS="listbox",i.LIST_ITEM_CLASS="listbox-item",i.LIST_ITEM_CLASS_DISABLED="listbox-item-disabled",i.LIST_ITEM_CLASS_SELECTED="listbox-item-selected",i.LIST_ITEM_CLASS_GROUP="listbox-item-group",i.LIST_ITEM_CLASS_CHILD="listbox-item-child",i.SEARCHBAR_CLASS="listbox-searchbar",i.SEARCHBAR_BUTTON_CLASS="listbox-searchbar-button",i.EVENT_VALUE_CHANGED="valueChanged",i.EVENT_FILTER_CHANGED="filterChanged",i.EVENT_ITEMS_CHANGED="itemsChanged",i.EVENT_ITEM_ENTER_PRESSED="itemEnterPressed",i.EVENT_ITEM_DOUBLE_CLICKED="itemDoubleClicked";window.SingleSelectListBox=class extends i{constructor(t,e){super(t,e,!1),this._selectedDomItem=null,this._createListbox()}_itemClicked(t,e=!1){if(t.classList.contains(i.LIST_ITEM_CLASS_DISABLED)||t.classList.contains(i.LIST_ITEM_CLASS_GROUP))return;this._selectedDomItem&&(this.clearSelection(),this._selectedDomItem=null),t.classList.toggle(i.LIST_ITEM_CLASS_SELECTED),t.focus(),this._selectedDomItem=t;const s=this._getDataItem(t.id);s.selected=!0,this.selectedDataItems.push(s),this._fireEvent(i.EVENT_VALUE_CHANGED,this._getDataItem(t.id))}_filterChanged(){if(!this._selectedDomItem||"none"===this._selectedDomItem.style.display){const t=this._list.querySelectorAll("."+i.LIST_ITEM_CLASS);for(let e=0;e<t.length;e++){let s=t.item(e);if(!s.classList.contains(i.LIST_ITEM_CLASS_GROUP)&&!s.classList.contains(i.LIST_ITEM_CLASS_DISABLED)&&"none"!==s.style.display){this._itemClicked(s);break}}}this._fireEvent(i.EVENT_FILTER_CHANGED,this._searchbar.value)}},window.MultiSelectListBox=class extends i{constructor(t,e){super(t,e,!0),this._createListbox()}_itemClicked(t,e=!1){if(t.classList.contains(i.LIST_ITEM_CLASS_DISABLED)||t.classList.contains(i.LIST_ITEM_CLASS_GROUP))return;let s=this._getDataItem(t.id);if(t.classList.contains(i.LIST_ITEM_CLASS_SELECTED))if(e){t.classList.remove(i.LIST_ITEM_CLASS_SELECTED),s.selected=!1;const e=this.selectedDataItems.indexOf(this._getDataItem(t.id));this.selectedDataItems.splice(e,1)}else this.clearSelection(),t.classList.add(i.LIST_ITEM_CLASS_SELECTED),s.selected=!0,this.selectedDataItems.push(s);else e||this.clearSelection(),t.focus(),t.classList.add(i.LIST_ITEM_CLASS_SELECTED),s.selected=!0,this.selectedDataItems.push(s);this._fireEvent(i.EVENT_VALUE_CHANGED,this.selectedDataItems)}_filterChanged(){this._fireEvent(i.EVENT_FILTER_CHANGED,this._searchbar.value)}}},function(t,e){},function(t,e,s){s(0),t.exports=s(1)}]);
//# sourceMappingURL=extended-listbox-min.js.map